{"version":3,"sources":["services/numbers.js","components/PersonForm.js","components/Filter.js","components/Person.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","onChange","type","Filter","filter","handleFilterChange","Person","person","deletePerson","name","number","onClick","Notification","message","className","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","setMessage","messageType","setMessageType","useEffect","numberService","initialNotes","toggleNumberOf","find","changedNumber","returnedPerson","map","setTimeout","catch","error","numbersToShow","toLocaleLowerCase","includes","event","console","log","target","preventDefault","window","confirm","samePerson","p","concat","i","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.07c7d445.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => {\n        return response.data\n    })\n}\n\nconst create =  newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => {\n        return response.data\n    })\n}\n\nconst remove = id => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => {\n        return response.data\n    })\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => {\n        return response.data\n    })\n}\n\nexport default {getAll, create, remove, update}","import React from 'react'\n\nconst PersonForm = ({addPerson, newName, handleNameChange, newNumber, handleNumberChange}) => {\n    return (\n        <form onSubmit={addPerson}>\n        <div>\n            name: <input value={newName} onChange={handleNameChange}/>\n        </div>\n        <div>\n            number: <input value={newNumber} onChange={handleNumberChange}/>\n        </div>\n        <div>\n            <button type=\"submit\">add</button>\n        </div>\n    </form>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Filter = ({filter, handleFilterChange}) => {\n  return(\n    <div>\n      filter show with <input value = {filter} onChange={handleFilterChange} />\n    </div>\n  )\n}\n\nexport default Filter","import React from 'react'\n\nconst Person = ({ person, deletePerson }) => {\n    return (\n        <tr>\n            <td>{person.name} </td>\n            <td>{person.number} </td>\n            <td><button onClick={deletePerson}>delete</button></td>\n        </tr>\n    )\n}\n\nexport default Person","import React from 'react'\n\nconst Notification = ({ message, type }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className={type}>\n        {message}\n      </div>\n    )\n  }\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport numberService from './services/numbers'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport Person from './components/Person'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [ message, setMessage ] = useState(null)\n  const [ messageType, setMessageType ] = useState(\"message\")\n\n  useEffect(() => {\n    numberService\n      .getAll()\n      .then(initialNotes => {\n        setPersons(initialNotes)\n      })\n  }, [])\n\n  const addPerson = (event) => {\n      event.preventDefault()\n      if (persons.map(person => person.name).includes(newName)) {\n          if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n            const samePerson = persons.filter(p => p.name === newName)\n            toggleNumberOf(samePerson[0].id)\n            setNewNumber('')\n            setNewName('')\n          }\n      } else {\n      const personObject = {\n          name: newName,\n          number: newNumber,\n      }\n\n      numberService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n        })\n        setMessage(\n        `Added ${newName}`\n        )\n        setMessageType(\"message\")\n        setTimeout(() => {\n          setMessage(null)\n        }, 3000);\n      }\n    }\n\n  const toggleNumberOf = id => {\n    const person = persons.find(person => person.id === id)\n    const changedNumber = { ...person, number: newNumber}\n\n    numberService\n      .update(id, changedNumber)\n      .then(returnedPerson => {\n        setPersons(persons.map(person => person.id !== id ? person : returnedPerson))\n        setMessage(\n          `Updated ${person.name}`\n        )\n        setMessageType(\"message\")\n        setTimeout(() => {\n          setMessage(null)\n        }, 3000);\n      })\n      .catch(error => {\n        setMessage(\n          `${person.name} was already deleted from server`\n        )\n        setMessageType(\"error\")\n        setTimeout(() => {\n          setMessage(null)\n        }, 3000);\n        setPersons(persons.filter(person => person.id !== id))\n      })\n  } \n\n  const handleNameChange = (event) => {\n      console.log('name:',event.target.value)\n      setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n      console.log('nbr:',event.target.value)\n      setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n      console.log('filter', event.target.value)\n      setFilter(event.target.value)\n  }\n\n  const deletePerson = (id, name) => {\n    if(window.confirm(`Delete '${name}'?`)) {\n      numberService\n      .remove(id)\n      .then(returnedPerson => { \n        setPersons(persons.filter(person => person.id !== id))\n        setMessage(\n          `Deleted ${name}`\n        )\n        setMessageType(\"message\")\n        setTimeout(() => {\n          setMessage(null)\n        }, 3000);\n      })\n      .catch(error => {\n        setMessage(\n          `${name} was already deleted from server`\n        )\n        setMessageType(\"error\")\n        setTimeout(() => {\n          setMessage(null)\n        }, 3000);\n        setPersons(persons.filter(person => person.id !== id))\n      })\n    }\n  }\n\n  const numbersToShow = persons.filter(person =>\n    person.name.toLocaleLowerCase().includes(filter.toLocaleLowerCase()))\n  \n  return (\n    <div>\n        <h1>Phonebook</h1>\n        <Notification message={message} type={messageType} />\n        <Filter filter={filter} handleFilterChange={handleFilterChange}/>\n        <h2>Add a new</h2>\n        <PersonForm \n            addPerson= {addPerson} \n            newName={newName} \n            handleNameChange={handleNameChange} \n            newNumber={newNumber} \n            handleNumberChange={handleNumberChange}\n        />\n        <h2>Numbers</h2>\n        <table>\n          <tbody>\n            {numbersToShow.map((person, i) =>\n              <Person \n              key={i}\n              person={person}\n              deletePerson={() => deletePerson(person.id, person.name)}\n              />\n          )}\n          </tbody>\n        </table>\n        \n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}